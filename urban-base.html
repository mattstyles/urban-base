<link rel="import" href="../polymer/polymer.html">

<polymer-element name="urban-base">

    <script charset="utf-8">

            (function( root ) {

                Polymer( 'urban-base', {


                    /*-----------------------------------------------------------*\
                     *
                     *  Polymer lifecycle events
                     *
                    \*-----------------------------------------------------------*/


                    /**
                     * Fired when Polymer has got the element ready
                     */
                    ready: function() {
                        this.bindAll( this );
                    },



                    /*-----------------------------------------------------------*\
                     *
                     *  Helpers
                     *
                    \*-----------------------------------------------------------*/


                    /**
                     * Simple, dirty bindAll implementation
                     *
                     * @param ctx {Object} the context to bind `this` to
                     */
                    bindAll: function( ctx ) {
                        for ( method in this ) {
                            if ( typeof this[ method ] === 'function' && !this.hasOwnProperty( method ) ) {
                                try {
                                    this[ method ] = this[ method ].bind( ctx );
                                } catch( err ) {
                                    console.log( this.element.name + '::', 'method binding error\n', method, err );
                                }
                            }
                        }
                    },


                    /**
                     * Adds an event listener that will be removed after the first execution
                     *
                     * @param event {String} id of event to listen for
                     * @param cb {Function} the callback to fire when the event is fired
                     * @param ctx {Object} the context the callback should be run in, defaults to __this__
                     */
                    once: function( event, cb, ctx ) {
                        var callback = function( e ) {
                            this.removeEventListener( event, callback );
                            cb.call( ctx || this, e );
                        }.bind( this );

                        this.addEventListener( event, callback );
                    }
                });


            })( this );

    </script>
</polymer-element>
